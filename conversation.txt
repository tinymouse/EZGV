# 簡単画像管理 EZGV

## プロトタイプ

以下の仕様のアプリを作ってみて。
・指定したフォルダおよび下層のフォルダにある画像ファイルを
サムネイル一覧表示する
・Electron アプリにする
↓
指定されたディレクトリに、Electronを使用した画像ビューアを作成します。

Electronアプリの作成が完了しました。 ご要望の仕様（フォルダ再帰検索、サムネイル一覧）を実装し、
モダンでプレミアムなダークモードデザインに仕上げています。

アプリの実行方法
ターミナルで以下のコマンドを実行してください。
npm start

## 最初の実装

以下の仕様でアプリを作ってみて。
・指定したフォルダおよび下層のフォルダにある画像ファイルを
サムネイル一覧表示する
・Electron アプリにする
・Vanilla JS で実装する
・Electron アプリにメニューは要らない
・最後に指定したフォルダを記憶して次回の初期値にする
・アプリの終了した時点のウィンドウのサイズと位置と最大化状態を記憶して次回の初期値にする
↓
仕様に基づき、Electronを使用したモダンな画像ビューアーアプリ「EZGV」を作成しました。

実装した主な機能
・画像サムネイル表示: 指定フォルダおよび下層フォルダの画像を再帰的に検索し、グリッド形式で一覧表示します。
・Electron メニューの非表示: アプリケーションメニューを削除し、コンテンツに集中できるデザインにしました。
・フォルダ記憶機能: 最後に開いたフォルダを保存し、次回起動時に自動的に読み込みます。
・ウィンドウ情報の保存: 終了時のウィンドウサイズ、位置、および最大化状態を記憶し、次回再現します。
・プレミアムなUI設計: ダークモード、グラスモルフィズム（背景ぼかし）、スムーズなアニメーションを採用し、ホバー時にファイル名を表示する機能も追加しました。
・ライトボックス表示: 画像をクリックすると、大きく拡大表示されます。

使用技術
Core: Electron, Vanilla JS
Styling: CSS (Modern UI / Glassmorphism / Inter Font)

構成ファイル
main.js: ウィンドウ管理、ファイルシステム操作（再帰検索）、設定の保存を担当。
preload.js: 安全にメインプロセスと通信するためのブリッジ。
renderer.js: UIの制御、画像リストのレンダリング、ライトボックス機能。
index.html & style.css: アプリケーションの構造とプレミアムなスタイリング。

使い方
プロジェクトのディレクトリに移動します。
以下のコマンドでアプリを起動します。
npm start

これで、ご要望通りの機能が揃ったElectronアプリが完成しました。

## 詳細ペインを追加

次の機能を追加して。
・サムネイル一覧画面の右側に詳細ペインを追加する
サムネイル一覧で選択した画像ファイルの属性を表示する
とりあえずファイル名と画像のサイズを表示する
・詳細ペインに「View」ボタンを追加して
これを押下すると画面全体に画像の内容を表示する
↓
詳細ペインの追加と機能実装を行いました。

アプリを再起動（npm start）すると、画像一覧の右側に詳細エリアが表示され、画像を選択すると詳細情報の確認とフルスクリーン切り替えが可能になります。

## 複数選択に対応

以下の機能を追加できる？
・サムネイル一覧画面で複数選択できるようにする
Windows エクスプローラのように「Ctrl＋クリック」や「Shift＋クリック」で選択できる
サムネイル画像の左上にチェックボックスを加える
・複数選択したときは詳細ペインのファイル名は「複数のファイルを選択」にする
↓
はい、実装可能です。サムネイル一覧での複数選択機能（Ctrl/Shiftキー対応、チェックボックス）を追加し、詳細ペインの表示ロジックを更新します。

アプリを再起動（npm start）してお試しください。CtrlやShiftを使った標準的な操作感でファイルを扱えるようになっています。

## 全画面表示の改善

以下の機能を追加できる？
・複数のファイルを選択して「View Full Screen」したら
全面表示画面は左右に分割して２つずつ表示する
全面表示画面の左端と右端に矢印ボタンを置いて
選択されたファイルを順に表示する
↓
はい、実装可能です。ライトボックス（全画面表示）の機能を拡張し、複数画像の比較表示に対応させます。

アプリを再起動（npm start）して、複数の画像を選択した状態でのビューワー機能をお試しください。

## 挙動を修正

全面表示画面で、ページを送るのでなく、ファイル１つずつ送るようにして。
↓
全画面表示時のナビゲーションを修正しました。 左右の矢印ボタン（またはキー操作）を押した際、2枚ずつではなく 1枚ずつ スライドするように変更しました。

全面表示画面で、最後のページは画像 1 枚だけにならないのがいいな。
↓
修正しました。

## 削除機能を追加

以下の機能を追加したい。
・全面表示画面で、画像ごとに削除ボタンを表示して
押下したらファイルを削除する
ゴミ箱フォルダに移動したいが、難しければ
指定したフォルダに「.trash」フォルダを用意して移動する
・ファイルを削除したら、全面表示画面および
サムネイル一覧から削除する
↓
基于 Electron の shell.trashItem を使用することで、OS 標準の「ゴミ箱」へ移動する機能を実装します。これにより、間違って削除しても復元が可能になります。
また、UI 側でも削除ボタンを追加し、削除時にリストと表示を即座に更新するようにします。

アプリを再起動（npm start）して、ご要望通りの挙動かご確認ください。

## 削除機能を追加

以下の機能を追加して。
・詳細画面に「削除」ボタンを追加して
対象のファイルを削除できるようにする
↓
詳細画面（右側のサイドペイン）に「削除（Delete Selection）」ボタンを追加しました。

## 移動機能を追加

以下の機能を追加して。
・全面表示画面で、画像ごとに移動ボタンを表示して
押下したら移動先を選択して移動する
最後に指定したフォルダを記憶して次回の初期値にする
・ファイルを移動したら、全面表示画面および
サムネイル一覧から削除する
↓
ファイルの移動機能を実装しました。

アプリを再起動（npm start）して、ご要望の挙動かご確認ください。

## インストーラを作成

Windows 用のインストーラを作りたい。
・Electron Builder を使う
・ソースコードは「src」フォルダに移動する
・作者は「Tiny Mouse」
・アプリIDは「jp.tinymouse.ezgv」
・アプリ名は「簡単画像管理」
・NSIS 形式のインストーラにする
以下の設定にする
・ワンクリックインストールしない
↓
ご要望に従い、パッケージ化の準備を整えました。

ビルド方法
以下のコマンドを実行すると、Windows用インストーラ（.exe）が dist フォルダに生成されます。
npm run build

このアプリに相応しいアイコンを作って。「res/icon」フォルダを作って PNG ファイルで保存して。
↓
アプリのアイコンを作成し、res/icon/icon.png に保存しました。
アプリのダークモードテーマ（紫、青、青緑のグラデーション）に合わせた、ガラスモーフィズムスタイルを採用しています。

Mac 用のインストーラを作りたい。
・DMG 形式のインストーラにする
↓
Mac用のインストーラ（DMG形式）を作成するための設定を package.json に追加しました

Mac実機でビルド、または GitHub Actions などの CI を利用する場合は、
この設定のまま npm run build を実行することで dist フォルダに DMG ファイルが生成されます。

Linux 用のインストーラを作りたい。
・DEB 形式のインストーラにする
↓
Linux用のインストーラ（DEB形式）を作成するための設定を package.json に追加しました。

これで Windows, Mac, Linux (DEB) の各プラットフォーム向けのビルド設定が揃いました。
ビルドを実行するには、これまで通り npm run build を使用してください。

## ラベル機能を追加

以下の機能を追加したい。
・画像ファイルごとにラベルを設定できるようにする
一つのファイルに複数のラベルをつけられる
ラベルはとりあえず「人物」「風景」「一人」「複数」を用意する
・詳細画面でファイルに設定されているラベルを表示・変更できる
上記のラベルを全て並べて表示して
ラベルごとにチェックボックスをつける
・複数のファイルを選択したときはラベルごとに
全てのファイルで同じラベルがセットされていたらチェックあり
全てのファイルで同じラベルがセットされていなかったらチェックなし
セットされていたりされていないファイルが混在していたら「－」を表示する
・詳細画面に「登録」ボタンを追加して
押下したらラベルの設定を変更する
・画像ファイルと同じフォルダに同名のテキストファイルを作成して
そのファイルにファイル名と属性を記録する
指定したフォルダの画像ファイルを検索するとき
上記のテキストファイルを読んでファイルごとのラベルを取得する
↓
すべての機能の実装が完了しました。

画像ごとにラベルを設定・保存し、次回起動時や再読み込み時にもその情報が維持されるようになります。
また、複数選択時のラベルの一括編集もスムーズに行えます。

## 検索機能を追加

以下の機能を追加したい。
・サムネイル一覧画面の上部に検索条件ペインを追加する
詳細ペインと同様にラベルを並べて表示して
ラベルごとにチェックボックスをつける
・検索条件ペインの「絞込」ボタンを置いて
押下するとサムネイル一覧画面で
指定したラベルが設定されたファイルだけ表示する
↓
検索条件ペイン（絞込機能）の追加が完了しました。

使いかた
画面上部のチェックボックスをオンにして「絞込」ボタンを押すと、条件に合う画像だけが表示されます。
チェックを全て外して「絞込」を押すと、元の全画像表示に戻ります。
