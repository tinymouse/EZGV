# 簡単画像管理 EZGV

## プロトタイプ

以下の仕様のアプリを作ってみて。
・指定したフォルダおよび下層のフォルダにある画像ファイルを
サムネイル一覧表示する
・Electron アプリにする
↓
指定されたディレクトリに、Electronを使用した画像ビューアを作成します。

Electronアプリの作成が完了しました。 ご要望の仕様（フォルダ再帰検索、サムネイル一覧）を実装し、
モダンでプレミアムなダークモードデザインに仕上げています。

アプリの実行方法
ターミナルで以下のコマンドを実行してください。
npm start

## 最初の実装

以下の仕様でアプリを作ってみて。
・指定したフォルダおよび下層のフォルダにある画像ファイルを
サムネイル一覧表示する
・Electron アプリにする
・Vanilla JS で実装する
・Electron アプリにメニューは要らない
・最後に指定したフォルダを記憶して次回の初期値にする
・アプリの終了した時点のウィンドウのサイズと位置と最大化状態を記憶して次回の初期値にする
↓
仕様に基づき、Electronを使用したモダンな画像ビューアーアプリ「EZGV」を作成しました。

実装した主な機能
・画像サムネイル表示: 指定フォルダおよび下層フォルダの画像を再帰的に検索し、グリッド形式で一覧表示します。
・Electron メニューの非表示: アプリケーションメニューを削除し、コンテンツに集中できるデザインにしました。
・フォルダ記憶機能: 最後に開いたフォルダを保存し、次回起動時に自動的に読み込みます。
・ウィンドウ情報の保存: 終了時のウィンドウサイズ、位置、および最大化状態を記憶し、次回再現します。
・プレミアムなUI設計: ダークモード、グラスモルフィズム（背景ぼかし）、スムーズなアニメーションを採用し、ホバー時にファイル名を表示する機能も追加しました。
・ライトボックス表示: 画像をクリックすると、大きく拡大表示されます。

使用技術
Core: Electron, Vanilla JS
Styling: CSS (Modern UI / Glassmorphism / Inter Font)

構成ファイル
main.js: ウィンドウ管理、ファイルシステム操作（再帰検索）、設定の保存を担当。
preload.js: 安全にメインプロセスと通信するためのブリッジ。
renderer.js: UIの制御、画像リストのレンダリング、ライトボックス機能。
index.html & style.css: アプリケーションの構造とプレミアムなスタイリング。

使い方
プロジェクトのディレクトリに移動します。
以下のコマンドでアプリを起動します。
npm start

これで、ご要望通りの機能が揃ったElectronアプリが完成しました。

## 詳細ペインを追加

次の機能を追加して。
・サムネイル一覧画面の右側に詳細ペインを追加する
サムネイル一覧で選択した画像ファイルの属性を表示する
とりあえずファイル名と画像のサイズを表示する
・詳細ペインに「View」ボタンを追加して
これを押下すると画面全体に画像の内容を表示する
↓
詳細ペインの追加と機能実装を行いました。

アプリを再起動（npm start）すると、画像一覧の右側に詳細エリアが表示され、画像を選択すると詳細情報の確認とフルスクリーン切り替えが可能になります。

## 複数選択に対応

以下の機能を追加できる？
・サムネイル一覧画面で複数選択できるようにする
Windows エクスプローラのように「Ctrl＋クリック」や「Shift＋クリック」で選択できる
サムネイル画像の左上にチェックボックスを加える
・複数選択したときは詳細ペインのファイル名は「複数のファイルを選択」にする
↓
はい、実装可能です。サムネイル一覧での複数選択機能（Ctrl/Shiftキー対応、チェックボックス）を追加し、詳細ペインの表示ロジックを更新します。

アプリを再起動（npm start）してお試しください。CtrlやShiftを使った標準的な操作感でファイルを扱えるようになっています。

## 全画面表示の改善

以下の機能を追加できる？
・複数のファイルを選択して「View Full Screen」したら
全面表示画面は左右に分割して２つずつ表示する
全面表示画面の左端と右端に矢印ボタンを置いて
選択されたファイルを順に表示する
↓
はい、実装可能です。ライトボックス（全画面表示）の機能を拡張し、複数画像の比較表示に対応させます。

アプリを再起動（npm start）して、複数の画像を選択した状態でのビューワー機能をお試しください。

## 挙動を修正

全面表示画面で、ページを送るのでなく、ファイル１つずつ送るようにして。
↓
全画面表示時のナビゲーションを修正しました。 左右の矢印ボタン（またはキー操作）を押した際、2枚ずつではなく 1枚ずつ スライドするように変更しました。

全面表示画面で、最後のページは画像 1 枚だけにならないのがいいな。
↓
修正しました。

## 削除機能を追加

以下の機能を追加したい。
・全面表示画面で、画像ごとに削除ボタンを表示して
押下したらファイルを削除する
ゴミ箱フォルダに移動したいが、難しければ
指定したフォルダに「.trash」フォルダを用意して移動する
・ファイルを削除したら、全面表示画面および
サムネイル一覧から削除する
↓
基于 Electron の shell.trashItem を使用することで、OS 標準の「ゴミ箱」へ移動する機能を実装します。これにより、間違って削除しても復元が可能になります。
また、UI 側でも削除ボタンを追加し、削除時にリストと表示を即座に更新するようにします。

アプリを再起動（npm start）して、ご要望通りの挙動かご確認ください。

## 削除機能を追加

以下の機能を追加して。
・詳細画面に「削除」ボタンを追加して
対象のファイルを削除できるようにする
↓
詳細画面（右側のサイドペイン）に「削除（Delete Selection）」ボタンを追加しました。

## 移動機能を追加

以下の機能を追加して。
・全面表示画面で、画像ごとに移動ボタンを表示して
押下したら移動先を選択して移動する
最後に指定したフォルダを記憶して次回の初期値にする
・ファイルを移動したら、全面表示画面および
サムネイル一覧から削除する
↓
ファイルの移動機能を実装しました。

アプリを再起動（npm start）して、ご要望の挙動かご確認ください。

## インストーラを作成

Windows 用のインストーラを作りたい。
・Electron Builder を使う
・ソースコードは「src」フォルダに移動する
・作者は「Tiny Mouse」
・アプリIDは「jp.tinymouse.ezgv」
・アプリ名は「簡単画像管理」
・NSIS 形式のインストーラにする
以下の設定にする
・ワンクリックインストールしない
↓
ご要望に従い、パッケージ化の準備を整えました。

ビルド方法
以下のコマンドを実行すると、Windows用インストーラ（.exe）が dist フォルダに生成されます。
npm run build

このアプリに相応しいアイコンを作って。「res/icon」フォルダを作って PNG ファイルで保存して。
↓
アプリのアイコンを作成し、res/icon/icon.png に保存しました。
アプリのダークモードテーマ（紫、青、青緑のグラデーション）に合わせた、ガラスモーフィズムスタイルを採用しています。

Mac 用のインストーラを作りたい。
・DMG 形式のインストーラにする
↓
Mac用のインストーラ（DMG形式）を作成するための設定を package.json に追加しました

Mac実機でビルド、または GitHub Actions などの CI を利用する場合は、
この設定のまま npm run build を実行することで dist フォルダに DMG ファイルが生成されます。

Linux 用のインストーラを作りたい。
・DEB 形式のインストーラにする
↓
Linux用のインストーラ（DEB形式）を作成するための設定を package.json に追加しました。

これで Windows, Mac, Linux (DEB) の各プラットフォーム向けのビルド設定が揃いました。
ビルドを実行するには、これまで通り npm run build を使用してください。

## ラベル機能を追加

以下の機能を追加したい。
・画像ファイルごとにラベルを設定できるようにする
一つのファイルに複数のラベルをつけられる
ラベルはとりあえず「人物」「風景」「一人」「複数」を用意する
・詳細画面でファイルに設定されているラベルを表示・変更できる
上記のラベルを全て並べて表示して
ラベルごとにチェックボックスをつける
・複数のファイルを選択したときはラベルごとに
全てのファイルで同じラベルがセットされていたらチェックあり
全てのファイルで同じラベルがセットされていなかったらチェックなし
セットされていたりされていないファイルが混在していたら「－」を表示する
・詳細画面に「登録」ボタンを追加して
押下したらラベルの設定を変更する
・画像ファイルと同じフォルダに同名のテキストファイルを作成して
そのファイルにファイル名と属性を記録する
指定したフォルダの画像ファイルを検索するとき
上記のテキストファイルを読んでファイルごとのラベルを取得する
↓
すべての機能の実装が完了しました。

画像ごとにラベルを設定・保存し、次回起動時や再読み込み時にもその情報が維持されるようになります。
また、複数選択時のラベルの一括編集もスムーズに行えます。

## 検索機能を追加

以下の機能を追加したい。
・サムネイル一覧画面の上部に検索条件ペインを追加する
詳細ペインと同様にラベルを並べて表示して
ラベルごとにチェックボックスをつける
・検索条件ペインの「絞込」ボタンを置いて
押下するとサムネイル一覧画面で
指定したラベルが設定されたファイルだけ表示する
↓
検索条件ペイン（絞込機能）の追加が完了しました。

使いかた
画面上部のチェックボックスをオンにして「絞込」ボタンを押すと、条件に合う画像だけが表示されます。
チェックを全て外して「絞込」を押すと、元の全画像表示に戻ります。

## ラベル管理画面を追加

以下の機能を追加したい。
・ラベル管理画面を用意する
・絞込条件ペインの「絞込」ボタンの右側に歯車アイコンを追加して
押下するとラベル管理画面に切替する
・既存のラベルを縦に並べて表示する
・ラベルの一覧の下に「＋」ボタンを追加して
押下すると「新しいラベル」を追加して入力モードにする
管理画面を閉じるまでは入力モードのままにする
・管理画面を閉じると追加したラベルを記録する
追加したラベルは絞込条件や詳細画面に反映する
↓
ラベル管理機能を追加しました。これにより、お好みのラベルを自由に追加・編集できるようになりました。

使いかた
1.絞り込みボタン横の歯車アイコンをクリックします。
2.「ラベルを追加」で「新しいラベル」が追加されるので、名前を入力します。
3.右上の「×」または画面外をクリックして管理画面を閉じると、追加したラベルが画面上に現れます。
↓
既存のラベルは管理画面で名前を変更できないようにできる？
↓
既存のラベル名を変更できないように制限をかけました。

これにより、不用意に既存のラベル名を書き換えてしまい、画像との紐付け（テキストファイル内の文字列）
が切れてしまうといったトラブルを防ぐことができます。

以下の機能を追加したい。
・ラベル管理画面でラベルを削除できるようにする
・絞込条件と詳細画面に一覧表示するラベルは
管理画面で登録しているラベルに加えて
ファイルに設定してあるラベルがあれば追加する
↓
ご要望通り、管理画面で登録されているラベルに加えて、読み込まれた画像ファイルに設定されているラベルも自動的に一覧へ表示されるようにしました。

変更箇所の概要
1.ラベル収集ロジックの強化 (render.js) 
・画像を読み込んだ際、あるいは詳細パネルでラベルを保存した際、フォルダ内の全画像データをスキャンして使用されているラベルをすべて抽出するようにしました。
・「管理画面で定義した定常ラベル」+「ファイルに存在するアドホックなラベル」を合体させて表示リストを生成します。
2.動的な反映タイミングの追加
・フォルダ読み込み時: 他のPCで付けられたラベルや、直接テキストファイルを編集して追加されたラベルも即座にチェックボックスとして現れます。
・ラベル保存時: 詳細画面で新しいラベルを（他の画像から引き継ぐなどして）保存した際、一覧を再更新します。
・画像削除時: そのラベルを持つ最後の画像を削除した場合、管理画面に登録されていないアドホックなラベルであれば、一覧から自動的に消去されます。

これにより、管理画面でいちいち登録していない一時的なラベルや過去のラベルがあっても、漏れなく絞り込みや確認に利用できるようになりました。

以下の機能を追加したい。
・ラベルはグループに属するようにする
・詳細画面と絞込条件でラベルはグループごとに枠で囲んで表示する
・ラベル管理画面でラベルごとにグループを指定できるようにする
↓
ラベルの「グループ化機能」を実装しました。

変更箇所の概要
1.グループごとの表示 (renderer.js 、style.css) 
・絞り込み条件ペインと詳細ペインのラベルを、グループごとに枠（カード形式）で囲んで表示するようにしました。
・各枠の上部にはグループ名が表示され、視覚的に整理されたレイアウトになっています。
・管理画面で登録されていない「ファイルにのみ存在するラベル」は、「未分類」グループとして自動的にまとめられます。
2.管理画面でのグループ指定 (renderer.js)
・ラベル管理画面に「グループ名」を入力するフィールドを追加しました。
・既存のラベルに対してもグループ名を書き換えることで、所属グループを自由に変更できます。
・新しいラベルを追加する際も、同時にグループを指定可能です。
3.データ構造の更新 (main.js)
・ラベル情報を「名前のみの文字列」から「名前とグループを持つオブジェクト」に変更しました。
・既存のラベルデータがある場合は、初回起動時に「基本」や「属性」といったデフォルトグループへ自動的に移行（マイグレーション）されるようにしています。

使いかた
1.歯車アイコンからラベル管理画面を開きます。
2.各ラベルの右側にある入力欄にグループ名（例：「基本」「属性」「イベント」など）を入力します。
3.管理画面を閉じると、画面上のラベルがそのグループごとに整理されて表示されます。

## AI によるラベル設定

以下の機能を追加できる？
・詳細画面に「ラベルを自動でつける」ボタンを用意して
画像ファイルを選択して詳細画面に表示して上記ボタンを押下すると
生成 AI サービスに画像を読ませてラベルを設定する
・使用する生成 AI サービスはとりあえず Google Gemini にする
API を呼出してもいいし、Gemini CLI を使ってもいい
↓
Google Gemini を利用した「ラベルの自動付与（自動提案）機能」を実装しました。

追加された機能
1.AIによる自動ラベリング (Auto Label)
・画像を1枚（または複数）選択した状態で、詳細パネルのラベル欄にある「自動でつける」ボタンを押すと、AIが画像を解析して最適なラベルを提案します。
・管理画面で登録しているマスターラベルから適切なものを選ぶだけでなく、画像の特徴に合わせて新しいラベル（アドホックラベル）も自動的に追加されます。
・提案されたラベルは即座にチェックボックスに反映されます。最後に「登録 (Save)」ボタンを押すことで確定されます。
2.APIキー設定機能
・ラベル管理（歯車アイコン）画面の下部に、AI 設定 (Google Gemini) 欄を追加しました。
・ここに Google AI Studio 等で取得した Gemini APIキーを入力して管理画面を閉じることで、PC内に安全に保存されます。
3.高度な解析ロジック (main.js)
・バックエンドで @google/generative-ai ライブラリを使用して Gemini 1.5 Flash モデルを呼び出しています。
・画像を直接解析するため、画像の内容に基づいた精度の高いキーワード抽出が可能です。

使いかた
1.歯車アイコンをクリックし、一番下の「AI設定」欄に Gemini APIキーを入力して画面を閉じます。
2.解析したい画像を選択します。
3.詳細ペインの「自動でつける」ボタンをクリックします。
4.「解析中...」の表示が消えると、ラベルが自動的にチェックされます。
5.内容を確認し、問題なければ「登録 (Save)」ボタンを押して保存してください。

ラベルを自動でつけるとき、「新規にラベルをつける」機能を管理画面で切替できるようにしたい。
↓
AIによる自動ラベリング時に「新しいラベルの生成を許可するかどうか」を切り替える設定を追加しました。

## 並替機能の追加

以下の機能を追加したい。
・絞込ペインの下に並替ペインを追加する
・「フォルダ＋ファイル名↑」「フォルダ＋ファイル名↓」「ファイル名↑」「ファイル名↓」「ファイル日時↑」「ファイル日時↓」ボタンで切替できる
「↑」「↓」はボタンを押下するとトグルする
・サムネイル一覧画面で並替する
↓
並べ替え（ソート）機能を追加しました。絞込ペインの下に新しく並べ替え用の操作エリアが表示されます。

実装の詳細
バックエンド (main.js)
ファイルの取得時に更新日時（mtime）を取得するように拡張しました。
フロントエンド (renderer.js)
ソート状態（基準と順序）を管理し、フィルタリングの際にあわせてソート処理を行うようにロジックを統合しました。

これにより、大量の画像ファイルの中から目的のものをより効率的に見つけることができるようになりました。

## 手動並替の追加

以下の機能を追加できる？
・並替の指定に「手動」を加えて、指定すると
サムネイル一覧画面でドラッグ＆ドロップで順序を入替できる
・入替した順序は画像と同名のテキストファイルに記録する
フォルダを開いたとき並替を再現する
↓
手動での並べ替え（ドラッグ＆ドロップ）機能を追加しました。

これで、お気に入りの画像を先頭に並べたり、特定のストーリーに沿って順序を構成したりすることが可能になりました。

ドラッグしている途中でもサムネイル一覧をリアルタイムで並替できる？
↓
手動並べ替えを、ドラッグしている最中にリアルタイムで位置が変わるように改良しました。

これにより、ドロップする前に「どこに挿入されるか」が目視で確認できるため、より確実に思い通りの並べ替えが可能になりました。

並替の指定を記憶して、アプリを起動したとき再現するようにして。
↓
並べ替え設定の記憶機能を追加しました。

## リネーム機能の追加

以下の機能を追加したい。
・詳細画面の下部にリネーム機能を加える
・以下のリネーム条件を指定できる
先頭：テキストボックス
区切文字：テキストボックスで「_」が初期値
ラベル：チェックボックス
ラベルは日時の後：チェックボックス
日付：チェックボックス
時刻：チェックボックス
時刻に秒を加える：チェックボックス
連番：チェックボックス
連番の桁数：コンボボックスで 1 ～ 9 を選択
・上記の条件で生成したファイル名を表示する
「先頭」「ラベル」「日付」「時刻」「連番」を区切文字で連結する
日付は YYYYMMDD の数字
日時は HHMM あるいは HHMMSS の数字
複数のファイルが選択されているときは先頭のファイルで表示する
・「リネーム」ボタンを用意して
押下したら上記の条件でファイルをリネームする
・ファイルごとの設定テキストに以前のファイル名を記録しておく
↓
詳細画面に「一括リネーム」機能を追加しました。

実装した機能
1.リネーム条件の柔軟な指定
先頭文字列: 任意のテキストを指定できます。
区切り文字: デフォルトは「_」ですが、変更可能です。
日付・時刻・秒: YYYYMMDD、HHMM、HHMMSS 形式の数字を挿入できます。
ラベル: 現在設定されているラベルを連結してファイル名に含められます。
連番: 複数ファイル選択時に 1～9 桁の連番を付与できます。
2.リアルタイム・プレビュー
条件を変更するたびに、新しいファイル名がどうなるか下部のエリアにプレビュー表示されます。複数選択時は先頭のファイルの状態が表示されます。
3.安全なリネーム処理
同名のファイルが既に存在する場合はエラーを表示し、上書きを防ぎます。
リネーム後、アプリ内のデータ（選択状態やパス）も自動的に更新され、一覧に戻ったときも正しい状態で表示されます。
4.変更履歴の記録
画像ごとの設定テキストファイル PREV_NAME: 行に、リネーム前の以前のファイル名を自動的に記録します。

これにより、AI でラベルを付けた後に、そのラベルや日時を含んだ分かりやすいファイル名へ一括で整理できるようになりました。

リネームの条件を記憶して、アプリを起動したとき再現するようにして。
↓
リネーム条件の記憶機能を追加しました。

これで、よく使うリネームのパターンを一度設定しておけば、次回からは画像を選んで実行ボタンを押すだけでスムーズにリネーム作業が行えるようになります。

「連番」指定ないとき「同名になるときは連番をつける」指定できるようにして。
↓
リネーム機能に「同名になるときは連番をつける」という自動競合回避オプションを追加しました。

追加した機能
自動連番付与: 「連番」チェックボックスをオンにしていない場合でも、このオプションが有効であれば、リネーム後のファイル名が既に存在する場合に自動的に _01, _02... と数字を末尾に付けてリネームを成功させます。
UIの連動: 「連番」自体を有効にしている間は、この自動オプションは不要（明示的に連番が振られるため）なため、操作ミスを防ぐよう自動的に無効化（グレーアウト）されるようにしました。
区切り文字の統一: 自動で付与される連番の前にも、リネーム設定で指定した「区切文字」が使用されます。
設定の記憶: このオプションのオン／オフ状態も、次回のアプリ起動時に引き継がれます。

これにより、同じ日付や同じラベルを持つ複数のファイルを一括リネームする際に、手動で連番設定を気にしなくても名前の競合を避けて綺麗に整理できるようになりました。

## 画像分割機能を追加

以下の機能を追加できる？
・詳細画面の下部に画像分割機能を加える
・以下の分割条件を指定できる
縦分割数：テキストボックス
横分割数：テキストボックス
・「分割」ボタンを用意して
押下したら上記の条件で画像を分割して
ファイル名に連番をつけて保存する
・ファイルごとの設定テキストに分割前のファイル名を記録しておく
↓
詳細画面の最下部に「画像分割」機能を追加しました。一つの画像をタイル状に切り分けて保存できます。

実装した機能
1.分割条件の指定
縦分割数・横分割数: 分割したい行数と列数を数値で指定できます（例：縦2×横2で4分割）。
枠外をクリックして実行する「分割実行」ボタンを用意しました。
2.自動リネームと連番
分割後のファイルは、元のファイル名に _01, _02... といった連番が付与された状態で、元の画像と同じフォルダに保存されます。
3.メタデータの継承
分割された各画像に対して、設定テキストファイルが自動生成されます。
PREV_NAME: 行に分割元の画像ファイル名を記録するため、どの画像から作成されたものか後から確認可能です。
4.自動リロード
分割完了後、現在のフォルダが自動的に読み込み直され、新しく生成された画像が即座に一覧に表示されます。

これにより、例えば複数枚の画像が1つに並んだ素材画像を、AIでラベルを付ける前に適切なサイズへ切り分けるといった作業が簡単に行えるようになりました。

## 絞込機能の修正

管理画面で「条件を変更したら直ぐに絞込する」を指定できるようにして、指定したら「絞込」ボタンを表示しないようにできる？
↓
管理画面（ラベル管理設定）に「条件を変更したら即座に絞り込む」のオプションを追加しました。

設定はアプリを再起動しても記憶されます。

## ラベル機能の修正

管理画面で「ラベルを変更したら直ぐに登録する」を指定できるようにして、指定したら詳細画面のラベルの「登録」ボタンを表示しないようにしたい
↓
管理画面（ラベル管理設定）に「ラベルを変更したら即座に登録する」オプションを追加しました。

これにより、ラベル付け作業の効率をさらに高めることができます。設定はアプリの再起動後も維持されます

自動更新を実装したい。
・electron-updater を使う
・アップデートが見つかったとき、ユーザに通知して更新するか確認する
・ダウンロードが完了したとき、ユーザに通知して再起動するか確認する
・GitHub の「リリース」を使う
併せて GitHub Actions を使ってビルドして公開するようにしたい。
GitHub のオーナは「tinymouse」、リポジトリは「EZGV」
↓
自動更新機能の実装と、GitHub Actions によるビルド・公開の設定が完了しました。

今後の手順
この機能を有効にするには、以下の手順で GitHub にコードを反映させてください。
1.変更をコミットしてプッシュ: 現在の変更を GitHub リポジトリにプッシュしてください。
2.バージョンを上げてタグを作成:
package.json のバージョンを更新（例: 0.9.1）し、Git でタグを作成してプッシュします。
3.Action の確認: GitHub の「Actions」タブでビルドが開始されたことを確認してください。完了すると「Releases」にインストーラが公開されます。

以降、古いバージョンのアプリを起動しているユーザーには、更新通知が表示されるようになります。

## ラベル機能の修正

・画像ファイルごとの設定テキストファイルに、画像に設定されたラベルを記録しているけど、ラベルが所属するグループも一緒に記録したい
・画像ファイルを検索したとき、画像に設定されているラベルのグループが、管理画面で設定されているラベルのグループになかったら、絞込条件や詳細画面で使用する
・画像ファイルを検索したとき、画像に設定されているラベルのグループと、管理画面で設定されているラベルのグループが違っていたら、管理画面の設定を優先する
↓
ご要望の機能を追加・修正しました。

1.ラベルグループの記録:
画像ごとの設定ファイルにラベルを保存する際、ラベル名 [GROUP: グループ名] という形式でグループ情報も記録するようにしました。
2.グループの優先順位:
画像を読み込む際、管理画面（マスター設定）に同じラベル名がある場合は、マスター設定のグループを優先します。
マスター設定にないラベルの場合、画像の設定ファイルに記録されたグループを使用します。
どちらにもない場合は 未分類 グループになります。
3.絞り込み・表示への反映:
上記ルールで決定されたグループに基づいて、絞り込み画面や詳細画面のラベル一覧が構成されるようになりました。

これにより、管理画面で定義していない独自のラベルでも、意図したグループに分類して表示・管理できるようになります。

## 削除機能を修正

詳細画面で「Delete」キー押下したら「削除」実行するようにしたい。
↓
詳細画面（およびメイン画面）で画像が選択されている状態で「Delete」キーを押すと、削除が実行されるように対応しました。

## サムネイルのサイズの変更

以下の機能を加えたい。
・サムネイルのサイズを指定できるようにする
・「小」が現行、「中」が現行の 120 % 、「大」が現行の 150 % 
・並替指定ペインの右端にドロップダウンリストを追加する
・アプリを終了したときのサイズの指定は記憶して起動したときに再現する
↓
ご要望に合わせて、サムネイルサイズを変更する機能を追加しました。

これで、画面サイズや好みに合わせて一覧の大きさを柔軟に調整できるようになります。

## リサイズ機能を追加
 
以下の機能を追加したい
・詳細画面の下部に画像リサイズを加える
・以下の条件を指定できる
縦サイズ：テキストボックス（上下ボタンつき）
横サイズ：テキストボックス（上下ボタンつき）
縦横の比率を保持する：チェックボックス
・サイズの初期値は現在のファイルのサイズで
縦横の比率を保持するの初期値はチェックあり
・比率を保持する指定あるとき
縦サイズを変更したら横サイズを計算してセットする
横サイズを変更したら縦サイズを計算してセットする
・「リサイズ」ボタンを用意して
押下したら上記の条件で画像をリサイズして
ファイル名にサイズをつけて保存する
・ファイルごとの設定テキストにリサイズ前のファイル名を記録しておく
↓
詳細画面に「画像リサイズ」機能を追加しました。

追加された機能
・リサイズ設定: 詳細画面の下部に「画像リサイズ」セクションを追加しました。
横幅・縦幅: 数値を直接入力、または上下ボタンで調整可能です。
縦横比の保持: チェックボックスがON（初期値）の場合、片方の数値を変更すると、もう一方が自動的に比率を維持した数値に更新されます。
初期値: 画像を選択した際、その画像の現在サイズが自動的にセットされます。
・リサイズ実行:
ボタンを押すと、指定したサイズで画像をリサイズし、新規ファイルとして保存します。
ファイル名は 元の名前_横幅x縦幅.拡張子 となります（例: photo_800x600.jpg）。
新しく作成された画像の設定用テキストファイル（.txt）には、以前の名前（PREV_NAME）が自動的に記録されます。

これにより、必要なサイズへ画像を素早く加工できるようになりました。

## ウォーターマーク追加機能を追加

以下の機能を追加したい
・詳細画面の下部にウォーターマーク追加を加える
・以下の条件を指定できる
ウォーターマーク画像：「画像指定」ボタン押下して
「ファイルを開く」ダイアログボックスで指定できる
指定したファイルの名前を表示する
透過率：テキストボックス（上下矢印つき）
・指定した条件は記憶してアプリを起動したとき再現する
・「ウォーターマークを追加」ボタンを用意して
押下したら上記の条件で画像にウォーターマークを合成して
ファイル名にマークをつけて保存する
・ファイルごとの設定テキストに合成前のファイル名を記録しておく
↓
詳細画面に「ウォーターマーク追加」機能を追加しました。

追加された機能
・ウォーターマーク設定: 詳細画面の下部に「ウォーターマーク追加」セクションを追加しました。
・画像指定: 合成したいロゴや透かし画像をファイル選択ダイアログで指定できます。
・透過率設定: 0〜100%の間で透かしの濃さを調整可能です。
・設定の保存: 指定した画像パスと透過率はアプリを閉じても記憶されます。
・合成実行:
ボタンを押すと、現在の画像の中央にウォーターマークを合成し、新規ファイルとして保存します。
ファイル名は 元の名前_marked.拡張子 となります。
新しく作成された画像の設定ファイル（.txt）には、合成前のファイル名（PREV_NAME）が自動的に記録されます。

これにより、著作権表示やロゴの挿入が簡単に行えるようになりました。
